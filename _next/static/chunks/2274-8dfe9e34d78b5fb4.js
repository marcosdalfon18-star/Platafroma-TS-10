"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2274],{9086:(e,t,a)=>{a.d(t,{Dc:()=>r.Dc,Gz:()=>u,Nn:()=>l,_L:()=>p,lU:()=>c,ui:()=>d});var r=a(35317),o=a(70412);let s={USERS:"users",COMPANIES:"companies",EMPLOYEES:"employees",JOB_POSITIONS:"jobPositions",SELECTION_PROCESSES:"selectionProcesses",PAYROLLS:"payrolls",ATTENDANCES:"attendances",DOCUMENTS:"documents"},i=e=>(0,r.rJ)(o.db,s[e]),n=(e,t)=>(0,r.H9)(o.db,s[e],t),d=async(e,t)=>{let a=r.Dc.now();return await (0,r.gS)(i(e),{...t,createdAt:a,updatedAt:a})},c=async(e,t,a)=>await (0,r.mZ)(n(e,t),{...a,updatedAt:r.Dc.now()}),l=async(e,t)=>await (0,r.kd)(n(e,t)),u=async(e,t)=>{let a=(0,r.P)(i(e),...t);return(await (0,r.GG)(a)).docs.map(e=>({id:e.id,...e.data()}))},p=async(e,t)=>{let a=await (0,r.x7)(n(e,t));return a.exists()?{id:a.id,...a.data()}:null}},26126:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(95155);a(12115);var o=a(74466),s=a(59434);let i=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...o}=e;return(0,r.jsx)("div",{className:(0,s.cn)(i({variant:a}),t),...o})}},30285:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>d});var r=a(95155),o=a(12115),s=a(66634),i=a(74466),n=a(59434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:a,variant:o,size:i,asChild:c=!1,...l}=e,u=c?s.DX:"button";return(0,r.jsx)(u,{className:(0,n.cn)(d({variant:o,size:i,className:a})),ref:t,...l})});c.displayName="Button"},38925:(e,t,a)=>{a.d(t,{x:()=>S});var r=a(12115),o=a(40283),s=a(65453),i=a(46786);let n={isLoading:!1,jobPositions:[],employees:[],sidebarCollapsed:!1,company:null},d=(0,s.v)()((0,i.Zr)((e,t)=>({...n,setLoading:t=>e({isLoading:t}),addJobPosition:t=>{let a={...t,id:Date.now()};e(e=>({jobPositions:[a,...e.jobPositions]}))},updateJobPosition:(t,a)=>e(e=>({jobPositions:e.jobPositions.map(e=>e.id===t?{...e,...a,updatedAt:new Date}:e)})),deleteJobPosition:t=>e(e=>({jobPositions:e.jobPositions.filter(e=>e.id!==t)})),setJobPositions:t=>e({jobPositions:t}),addEmployee:t=>e(e=>({employees:[...e.employees,t]})),updateEmployee:(t,a)=>e(e=>({employees:e.employees.map(e=>e.id===t?{...e,...a}:e)})),deleteEmployee:t=>e(e=>({employees:e.employees.filter(e=>e.id!==t)})),setEmployees:t=>e({employees:t}),setSidebarCollapsed:t=>e({sidebarCollapsed:t}),setCompany:t=>e({company:t}),reset:()=>e(n)}),{name:"app-storage",storage:(0,i.KU)(()=>localStorage),partialize:e=>({jobPositions:e.jobPositions,employees:e.employees,sidebarCollapsed:e.sidebarCollapsed,company:e.company})}));var c=a(35317),l=a(9086);let u=async e=>{let t={...e,requirements:e.requirements||[],responsibilities:e.responsibilities||[],status:"borrador",processStatus:"no_iniciado"};return(await (0,l.ui)("JOB_POSITIONS",t)).id},p=async(e,t)=>{await (0,l.lU)("JOB_POSITIONS",e,t)},y=async e=>{await (0,l.Nn)("JOB_POSITIONS",e)},f=async e=>await (0,l.Gz)("JOB_POSITIONS",[(0,c._M)("companyId","==",e),(0,c.My)("createdAt","desc")]),m=async(e,t)=>{await p(e,{status:t})},b=async(e,t)=>{await p(e,{processStatus:t})};var v=a(87481);let g=e=>({id:parseInt(e.id)||Date.now(),title:e.title,department:e.department,description:e.description,status:"activo"===e.status?"Activo":"borrador"===e.status?"Borrador":"Archivado",processStatus:"no_iniciado"===e.processStatus?"No Iniciado":"activo"===e.processStatus?"Activo":"Cerrado"}),S=()=>{let{user:e}=(0,o.A)(),{jobPositions:t,setJobPositions:a,addJobPosition:s,updateJobPosition:i,deleteJobPosition:n}=d(),[c,l]=(0,r.useState)(!1),{toast:S}=(0,v.dj)(),E=(null==e?void 0:e.companyId)||"default-company",w=async()=>{if(e){l(!0);try{let e=(await f(E)).map(g);a(e)}catch(e){console.error("Error loading job positions:",e),S({title:"Error",description:"No se pudieron cargar los puestos de trabajo",variant:"destructive"})}finally{l(!1)}}},h=async t=>{if(e){l(!0);try{let a=await u({...t,companyId:E,createdBy:e.uid});return s({...t,status:"Borrador",processStatus:"No Iniciado"}),S({title:"\xc9xito",description:"Puesto de trabajo creado correctamente"}),a}catch(e){throw console.error("Error creating job position:",e),S({title:"Error",description:"No se pudo crear el puesto de trabajo",variant:"destructive"}),e}finally{l(!1)}}},N=async(e,t)=>{l(!0);try{await p(e.toString(),t);let a={...t};t.status&&(a.status="activo"===t.status?"Activo":"borrador"===t.status?"Borrador":"Archivado"),t.processStatus&&(a.processStatus="no_iniciado"===t.processStatus?"No Iniciado":"activo"===t.processStatus?"Activo":"Cerrado"),i(e,a),S({title:"\xc9xito",description:"Puesto de trabajo actualizado correctamente"})}catch(e){throw console.error("Error updating job position:",e),S({title:"Error",description:"No se pudo actualizar el puesto de trabajo",variant:"destructive"}),e}finally{l(!1)}},I=async e=>{l(!0);try{await y(e.toString()),n(e),S({title:"\xc9xito",description:"Puesto de trabajo eliminado correctamente"})}catch(e){throw console.error("Error deleting job position:",e),S({title:"Error",description:"No se pudo eliminar el puesto de trabajo",variant:"destructive"}),e}finally{l(!1)}},_=async(e,t)=>{try{await m(e.toString(),t),await N(e,{status:t})}catch(e){throw e}},A=async(e,t)=>{try{await b(e.toString(),t),await N(e,{processStatus:t})}catch(e){throw e}};return(0,r.useEffect)(()=>{e&&0===t.length&&w()},[e]),{jobPositions:t,loading:c,loadJobPositions:w,createJobPosition:h,updateJobPosition:N,deleteJobPosition:I,changeStatus:_,changeProcess:A}}},40283:(e,t,a)=>{a.d(t,{A:()=>c,AuthProvider:()=>l});var r=a(95155),o=a(12115),s=a(93004),i=a(35317),n=a(70412);let d=(0,o.createContext)(void 0),c=()=>{let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[a,c]=(0,o.useState)(null),[l,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=(0,s.hg)(n.j,async e=>{if(e){let t=await (0,i.x7)((0,i.H9)(n.db,"users",e.uid));if(t.exists()){let a=t.data();c({uid:e.uid,email:e.email,displayName:e.displayName||a.displayName,role:a.role,companyId:a.companyId})}}else c(null);u(!1)});return()=>e()},[]);let p=async(e,t)=>{u(!0);try{await (0,s.x9)(n.j,e,t)}catch(e){throw u(!1),e}},y=async(e,t,a,r)=>{u(!0);try{let{user:o}=await (0,s.eJ)(n.j,e,t);await (0,s.r7)(o,{displayName:a}),await (0,i.BN)((0,i.H9)(n.db,"users",o.uid),{email:e,displayName:a,role:r,createdAt:new Date,updatedAt:new Date})}catch(e){throw u(!1),e}},f=async()=>{await (0,s.CI)(n.j)},m=async e=>{await (0,s.J1)(n.j,e)},b=async e=>{if(!a||!n.j.currentUser)throw Error("No user authenticated");e.displayName&&e.displayName!==a.displayName&&await (0,s.r7)(n.j.currentUser,{displayName:e.displayName}),await (0,i.mZ)((0,i.H9)(n.db,"users",a.uid),{...e,updatedAt:(0,i.O5)()}),c(t=>t?{...t,...e}:null)},v=async()=>{if(!n.j.currentUser)throw Error("No user authenticated");await (0,s.gA)(n.j.currentUser)};return(0,r.jsx)(d.Provider,{value:{user:a,loading:l,login:p,register:y,logout:f,resetPassword:m,updateUserProfile:b,verifyEmail:v},children:t})}},59434:(e,t,a)=>{a.d(t,{cn:()=>s});var r=a(52596),o=a(39688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}},66695:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>u});var r=a(95155),o=a(12115),s=a(59434);let i=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...o})});i.displayName="Card";let n=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...o})});n.displayName="CardHeader";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...o})});d.displayName="CardTitle";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...o})});c.displayName="CardDescription";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...o})});l.displayName="CardContent";let u=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...o})});u.displayName="CardFooter"},70412:(e,t,a)=>{a.d(t,{db:()=>c,j:()=>d,y:()=>n});var r=a(23915),o=a(93004),s=a(35317),i=a(87358);for(let e of["NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","NEXT_PUBLIC_FIREBASE_PROJECT_ID","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","NEXT_PUBLIC_FIREBASE_APP_ID"])if(!i.env[e])throw Error("Missing required environment variable: ".concat(e));let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyCfyNXGXUX0ip0icCSuDlKasX2PN4GIKiY",authDomain:"studio-6568907544-ca1d2.firebaseapp.com",projectId:"studio-6568907544-ca1d2",storageBucket:"studio-6568907544-ca1d2.appspot.com",messagingSenderId:"95313933174",appId:"1:95313933174:web:04ac254b7c65fdbdbfc057"}),d=(0,o.xI)(n),c=(0,s.aU)(n)},87481:(e,t,a)=>{a.d(t,{dj:()=>p,oR:()=>u});var r=a(12115);let o=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=n(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}}}]);