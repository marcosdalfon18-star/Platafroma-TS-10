(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9531],{18153:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var a=r(95155),l=r(12115),t=r(66695),n=r(30285),i=r(26126),d=r(85127),c=r(17313),o=r(62523),u=r(18046),x=r(11133),m=r(94063),h=r(51920),j=r(8376),v=r(24371),p=r(30462),g=r(75074),f=r(3561),N=r(13300),w=r(18763),b=r(77223),y=r(44838),E=r(83013),C=r(61055),A=r(22497),P=r(10077),S=r(10664),R=r(19053),Z=r(40283),B=r(87481);let _=()=>{let{user:e}=(0,Z.A)(),{toast:s}=(0,B.dj)(),{interviews:r,candidates:R,stats:_,loading:k,createInterview:O,updateInterviewStatus:L,addEvaluation:W,deleteInterview:X,getTodaysInterviews:D,getUpcomingInterviews:H}=(0,A.y)(),[F,G]=(0,l.useState)(!1),[I,T]=(0,l.useState)(!1),[V,q]=(0,l.useState)(null),[z,U]=(0,l.useState)(""),[$,M]=(0,l.useState)("all"),Q={canCreate:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canEdit:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canDelete:(null==e?void 0:e.role)==="consultor",canEvaluate:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canViewAll:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canManageProcess:(null==e?void 0:e.role)==="consultor",isReadOnly:(null==e?void 0:e.role)==="empleado"||(null==e?void 0:e.role)==="gestor"},J=async e=>{if(!Q.canCreate)return void s({title:"Permisos insuficientes",description:"Solo Consultoras y Empresarios pueden crear entrevistas",variant:"destructive"});await O(e)},K=async(e,r,a,l)=>{if(!Q.canEvaluate)return void s({title:"Permisos insuficientes",description:"Solo Consultoras y Empresarios pueden evaluar entrevistas",variant:"destructive"});(null==V?void 0:V.id)&&await W(V.id,e,r,a,l)},Y=async(e,r)=>{if(!Q.canEdit)return void s({title:"Permisos insuficientes",description:"No tienes permisos para modificar el estado de las entrevistas",variant:"destructive"});await L(e,r)},ee=async e=>{if(!Q.canDelete)return void s({title:"Permisos insuficientes",description:"Solo las Consultoras pueden eliminar entrevistas",variant:"destructive"});confirm("\xbfEst\xe1s seguro de que quieres eliminar esta entrevista?")&&await X(e)},es=r.filter(e=>e.candidateName.toLowerCase().includes(z.toLowerCase())||e.position.toLowerCase().includes(z.toLowerCase())||e.interviewerName.toLowerCase().includes(z.toLowerCase())),er=()=>{switch($){case"today":return D();case"upcoming":return H();case"scheduled":return es.filter(e=>"scheduled"===e.status);case"completed":return es.filter(e=>"completed"===e.status);case"pending-evaluation":return es.filter(e=>{var s;return"completed"===e.status&&!(null==(s=e.evaluations)?void 0:s.length)});default:return es}},ea=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"rescheduled":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},el=e=>{switch(e){case"scheduled":return"Programada";case"in-progress":return"En Progreso";case"completed":return"Completada";case"cancelled":return"Cancelada";case"rescheduled":return"Reprogramada";default:return e}},et=e=>{switch(e){case"approved":return(0,a.jsx)(i.E,{className:"bg-green-100 text-green-800",children:"Aprobado"});case"rejected":return(0,a.jsx)(i.E,{className:"bg-red-100 text-red-800",children:"Rechazado"});case"pending":return(0,a.jsx)(i.E,{className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});default:return(0,a.jsx)(i.E,{variant:"outline",children:"Sin evaluar"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:(null==e?void 0:e.role)==="consultor"?"Gesti\xf3n de Entrevistas":(null==e?void 0:e.role)==="empresario"?"Entrevistas de la Empresa":"Consulta de Entrevistas"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:(null==e?void 0:e.role)==="consultor"?"Programa, gestiona y eval\xfaa entrevistas de candidatos":(null==e?void 0:e.role)==="empresario"?"Revisa y participa en el proceso de entrevistas":"Consulta informaci\xf3n sobre entrevistas programadas"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(i.E,{variant:(null==e?void 0:e.role)==="consultor"?"default":"secondary",children:(null==e?void 0:e.role)==="consultor"?"\uD83D\uDC69‍\uD83D\uDCBC Consultora":(null==e?void 0:e.role)==="empresario"?"\uD83C\uDFE2 Empresario":(null==e?void 0:e.role)==="empleado"?"\uD83D\uDC68‍\uD83D\uDCBB Empleado":(null==e?void 0:e.role)==="gestor"?"\uD83D\uDC54 Gestor":"Usuario"}),Q.isReadOnly&&(0,a.jsx)(i.E,{variant:"outline",className:"text-orange-600 border-orange-200",children:"\uD83D\uDC41️ Solo Lectura"})]})]}),Q.canCreate&&(0,a.jsxs)(n.$,{onClick:()=>G(!0),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Nueva Entrevista"]}),Q.isReadOnly&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground bg-orange-50 p-3 rounded-lg border border-orange-200",children:[(0,a.jsx)(x.A,{className:"inline h-4 w-4 mr-2 text-orange-600"}),"Contacta a la Consultora para gestionar entrevistas"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Total"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:_.total})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Programadas"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-blue-600"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:_.scheduled})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Completadas"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.completed})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Aprobados"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.approved})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Rechazados"}),(0,a.jsx)(v.A,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:_.rejected})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"Promedio"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-yellow-600"})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:_.averageScore.toFixed(1)})})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,a.jsx)(o.p,{placeholder:"Buscar por candidato, posici\xf3n o entrevistador...",value:z,onChange:e=>U(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(c.tU,{value:$,onValueChange:M,children:[(0,a.jsxs)(c.j7,{children:[(0,a.jsx)(c.Xi,{value:"all",children:"Todas"}),(0,a.jsx)(c.Xi,{value:"today",children:"Hoy"}),(0,a.jsx)(c.Xi,{value:"upcoming",children:"Pr\xf3ximas"}),(0,a.jsx)(c.Xi,{value:"scheduled",children:"Programadas"}),(0,a.jsx)(c.Xi,{value:"completed",children:"Completadas"}),(0,a.jsx)(c.Xi,{value:"pending-evaluation",children:"Pendientes Evaluaci\xf3n"})]}),(0,a.jsx)(c.av,{value:$,className:"space-y-4",children:(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{children:[(0,a.jsx)(t.ZB,{children:"Entrevistas"}),(0,a.jsxs)(t.BT,{children:[er().length," entrevista(s) encontrada(s)"]})]}),(0,a.jsx)(t.Wu,{children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"Candidato"}),(0,a.jsx)(d.nd,{children:"Posici\xf3n"}),(0,a.jsx)(d.nd,{children:"Fecha y Hora"}),(0,a.jsx)(d.nd,{children:"Entrevistador"}),(0,a.jsx)(d.nd,{children:"Estado"}),(0,a.jsx)(d.nd,{children:"Decisi\xf3n"}),(0,a.jsx)(d.nd,{children:"Puntuaci\xf3n"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Acciones"})]})}),(0,a.jsxs)(d.BF,{children:[er().map(e=>{var s;return(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:e.candidateName}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.candidateEmail})]})}),(0,a.jsx)(d.nA,{children:e.position}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,E.GP)(e.date,"PPP",{locale:C.es})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.time," • ",e.duration,"min"]})]})}),(0,a.jsx)(d.nA,{children:e.interviewerName}),(0,a.jsx)(d.nA,{children:(0,a.jsx)(i.E,{className:ea(e.status),children:el(e.status)})}),(0,a.jsx)(d.nA,{children:et(e.decision)}),(0,a.jsx)(d.nA,{children:e.finalScore?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)("span",{children:e.finalScore.toFixed(1)})]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(d.nA,{className:"text-right",children:(0,a.jsxs)(y.rI,{children:[(0,a.jsx)(y.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(y.SQ,{align:"end",children:["scheduled"===e.status&&(0,a.jsxs)(y._2,{onClick:()=>Y(e.id,"in-progress"),children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Iniciar Entrevista"]}),("in-progress"===e.status||"completed"===e.status)&&(0,a.jsxs)(y._2,{onClick:()=>{q(e),T(!0)},children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),(null==(s=e.evaluations)?void 0:s.length)?"Ver/Editar Evaluaci\xf3n":"Evaluar"]}),(0,a.jsxs)(y._2,{onClick:()=>{q(e),G(!0)},children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,a.jsx)(y.mB,{}),(0,a.jsxs)(y._2,{onClick:()=>ee(e.id),className:"text-red-600",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})})]},e.id)}),0===er().length&&(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:8,className:"h-24 text-center text-muted-foreground",children:"No se encontraron entrevistas"})})]})]})})]})})]}),(0,a.jsx)(P.A,{isOpen:F,onClose:()=>{G(!1),q(null)},onSubmit:J,candidates:R,interview:V||void 0,loading:k}),V&&(0,a.jsx)(S.A,{isOpen:I,onClose:()=>{T(!1),q(null)},onSubmit:K,interview:V,loading:k})]})};function k(){return(0,a.jsx)(R.O,{allowedRoles:["consultor","empresario"],children:(0,a.jsx)(_,{})})}},68948:(e,s,r)=>{Promise.resolve().then(r.bind(r,18153))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,4277,3909,4052,9233,2001,7788,2891,4800,9714,7269,8615,6755,8441,1684,7358],()=>s(68948)),_N_E=e.O()}]);