(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1749],{24944:(e,s,t)=>{"use strict";t.d(s,{k:()=>d});var a=t(95155),r=t(12115),i=t(88216),n=t(59434);let d=r.forwardRef((e,s)=>{let{className:t,value:r,...d}=e;return(0,a.jsx)(i.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...d,children:(0,a.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});d.displayName=i.bL.displayName},26126:(e,s,t)=>{"use strict";t.d(s,{E:()=>d});var a=t(95155);t(12115);var r=t(74466),i=t(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:t}),s),...r})}},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>l,r:()=>o});var a=t(95155),r=t(12115),i=t(66634),n=t(74466),d=t(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:l=!1,...c}=e,u=l?i.DX:"button";return(0,a.jsx)(u,{className:(0,d.cn)(o({variant:r,size:n,className:t})),ref:s,...c})});l.displayName="Button"},40283:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,AuthProvider:()=>c});var a=t(95155),r=t(12115),i=t(93004),n=t(35317),d=t(70412);let o=(0,r.createContext)(void 0),l=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:s}=e,[t,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,i.hg)(d.j,async e=>{if(e){let s=await (0,n.x7)((0,n.H9)(d.db,"users",e.uid));if(s.exists()){let t=s.data();l({uid:e.uid,email:e.email,displayName:e.displayName||t.displayName,role:t.role,companyId:t.companyId})}}else l(null);u(!1)});return()=>e()},[]);let m=async(e,s)=>{u(!0);try{await (0,i.x9)(d.j,e,s)}catch(e){throw u(!1),e}},f=async(e,s,t,a)=>{u(!0);try{let{user:r}=await (0,i.eJ)(d.j,e,s);await (0,i.r7)(r,{displayName:t}),await (0,n.BN)((0,n.H9)(d.db,"users",r.uid),{email:e,displayName:t,role:a,createdAt:new Date,updatedAt:new Date})}catch(e){throw u(!1),e}},x=async()=>{await (0,i.CI)(d.j)},p=async e=>{await (0,i.J1)(d.j,e)},h=async e=>{if(!t||!d.j.currentUser)throw Error("No user authenticated");e.displayName&&e.displayName!==t.displayName&&await (0,i.r7)(d.j.currentUser,{displayName:e.displayName}),await (0,n.mZ)((0,n.H9)(d.db,"users",t.uid),{...e,updatedAt:(0,n.O5)()}),l(s=>s?{...s,...e}:null)},g=async()=>{if(!d.j.currentUser)throw Error("No user authenticated");await (0,i.gA)(d.j.currentUser)};return(0,a.jsx)(o.Provider,{value:{user:t,loading:c,login:m,register:f,logout:x,resetPassword:p,updateUserProfile:h,verifyEmail:g},children:s})}},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(52596),r=t(39688);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),r=t(12115),i=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>u});var a=t(95155),r=t(12115),i=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});l.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},70412:(e,s,t)=>{"use strict";t.d(s,{db:()=>l,j:()=>o,y:()=>d});var a=t(23915),r=t(93004),i=t(35317),n=t(87358);for(let e of["NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","NEXT_PUBLIC_FIREBASE_PROJECT_ID","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","NEXT_PUBLIC_FIREBASE_APP_ID"])if(!n.env[e])throw Error("Missing required environment variable: ".concat(e));let d=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyCfyNXGXUX0ip0icCSuDlKasX2PN4GIKiY",authDomain:"studio-6568907544-ca1d2.firebaseapp.com",projectId:"studio-6568907544-ca1d2",storageBucket:"studio-6568907544-ca1d2.appspot.com",messagingSenderId:"95313933174",appId:"1:95313933174:web:04ac254b7c65fdbdbfc057"}),o=(0,r.xI)(d),l=(0,i.aU)(d)},79669:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(95155),r=t(12115),i=t(66695),n=t(30285),d=t(62523),o=t(85057),l=t(4884),c=t(59434);let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.bL,{className:(0,c.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(l.zi,{className:(0,c.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});u.displayName=l.bL.displayName;var m=t(26126),f=t(24944),x=t(45731),p=t(8376),h=t(11133),g=t(37648),v=t(47053),b=t(4607),j=t(17607),N=t(19637),w=t(95633),y=t(40283),E=t(87481);function A(){let{user:e,resetPassword:s,verifyEmail:t}=(0,y.A)(),{toast:l}=(0,E.dj)(),[c,A]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[_,I]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[R,k]=(0,r.useState)({emailVerified:null!=e&&!!e.uid,twoFactorEnabled:!1,loginNotifications:!0,sessionTimeout:30}),B=e=>{let s=0;return e.length>=8&&s++,/[A-Z]/.test(e)&&s++,/[a-z]/.test(e)&&s++,/\d/.test(e)&&s++,/[!@#$%^&*(),.?":{}|<>]/.test(e)&&s++,{score:s,level:["Muy d\xe9bil","D\xe9bil","Regular","Fuerte","Muy fuerte"][s]||"Muy d\xe9bil",color:["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][s]||"bg-red-500",percentage:s/5*100}},D=async e=>{if(e.preventDefault(),_.newPassword!==_.confirmPassword)return void l({title:"Error",description:"Las contrase\xf1as no coinciden",variant:"destructive"});if(B(_.newPassword).score<3)return void l({title:"Contrase\xf1a d\xe9bil",description:"Por favor, usa una contrase\xf1a m\xe1s fuerte",variant:"destructive"});A(!0);try{await new Promise(e=>setTimeout(e,1e3)),l({title:"Contrase\xf1a actualizada",description:"Tu contrase\xf1a ha sido cambiada exitosamente"}),I({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){l({title:"Error",description:"No se pudo cambiar la contrase\xf1a",variant:"destructive"})}finally{A(!1)}},F=async()=>{try{await t(),l({title:"Email enviado",description:"Se ha enviado un correo de verificaci\xf3n"})}catch(e){l({title:"Error",description:"No se pudo enviar el email de verificaci\xf3n",variant:"destructive"})}},O=async()=>{if(null==e?void 0:e.email)try{await s(e.email),l({title:"Email enviado",description:"Se ha enviado un enlace para restablecer tu contrase\xf1a"})}catch(e){l({title:"Error",description:"No se pudo enviar el email de restablecimiento",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-8 w-8"}),"Configuraci\xf3n de Seguridad"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Gestiona la seguridad de tu cuenta y protege tu informaci\xf3n"})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Estado de Seguridad"]}),(0,a.jsx)(i.BT,{children:"Resumen del nivel de seguridad de tu cuenta"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[R.emailVerified?(0,a.jsx)(p.A,{className:"h-8 w-8 text-green-500"}):(0,a.jsx)(h.A,{className:"h-8 w-8 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Email"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:R.emailVerified?"Verificado":"Sin verificar"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[R.twoFactorEnabled?(0,a.jsx)(p.A,{className:"h-8 w-8 text-green-500"}):(0,a.jsx)(h.A,{className:"h-8 w-8 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Autenticaci\xf3n 2FA"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:R.twoFactorEnabled?"Activada":"Desactivada"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Sesi\xf3n"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Timeout: ",R.sessionTimeout,"min"]})]})]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-5 w-5"}),"Cambiar Contrase\xf1a"]}),(0,a.jsx)(i.BT,{children:"Actualiza tu contrase\xf1a regularmente para mantener tu cuenta segura"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"currentPassword",children:"Contrase\xf1a Actual"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.p,{id:"currentPassword",type:S?"text":"password",value:_.currentPassword,onChange:e=>I(s=>({...s,currentPassword:e.target.value})),className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>C(!S),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:S?(0,a.jsx)(b.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"newPassword",children:"Nueva Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.p,{id:"newPassword",type:T?"text":"password",value:_.newPassword,onChange:e=>I(s=>({...s,newPassword:e.target.value})),className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>P(!T),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:T?(0,a.jsx)(b.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"})})]}),_.newPassword&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Fortaleza:"}),(0,a.jsx)(m.E,{variant:B(_.newPassword).score>=3?"default":"destructive",children:B(_.newPassword).level})]}),(0,a.jsx)(f.k,{value:B(_.newPassword).percentage,className:"h-2"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"confirmPassword",children:"Confirmar Nueva Contrase\xf1a"}),(0,a.jsx)(d.p,{id:"confirmPassword",type:"password",value:_.confirmPassword,onChange:e=>I(s=>({...s,confirmPassword:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(n.$,{type:"submit",disabled:c,children:c?"Actualizando...":"Cambiar Contrase\xf1a"}),(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:O,children:"Enviar Reset por Email"})]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),"Verificaci\xf3n de Email"]}),(0,a.jsx)(i.BT,{children:"Verifica tu direcci\xf3n de correo electr\xf3nico"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[R.emailVerified?(0,a.jsx)(p.A,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(h.A,{className:"h-5 w-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:null==e?void 0:e.email}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:R.emailVerified?"Email verificado":"Email sin verificar"})]})]}),!R.emailVerified&&(0,a.jsx)(n.$,{onClick:F,children:"Enviar Verificaci\xf3n"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),"Configuraciones de Seguridad"]}),(0,a.jsx)(i.BT,{children:"Personaliza las opciones de seguridad de tu cuenta"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Autenticaci\xf3n de Dos Factores"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Agrega una capa extra de seguridad a tu cuenta"})]}),(0,a.jsx)(u,{checked:R.twoFactorEnabled,onCheckedChange:e=>k(s=>({...s,twoFactorEnabled:e}))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Notificaciones de Inicio de Sesi\xf3n"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recibe alertas cuando alguien acceda a tu cuenta"})]}),(0,a.jsx)(u,{checked:R.loginNotifications,onCheckedChange:e=>k(s=>({...s,loginNotifications:e}))})]}),(0,a.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Timeout de Sesi\xf3n"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[R.sessionTimeout," min"]})]}),(0,a.jsx)("input",{type:"range",min:"15",max:"120",step:"15",value:R.sessionTimeout,onChange:e=>k(s=>({...s,sessionTimeout:parseInt(e.target.value)})),className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"15 min"}),(0,a.jsx)("span",{children:"2 horas"})]})]})]})]})]})}},84536:(e,s,t)=>{Promise.resolve().then(t.bind(t,79669))},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>l});var a=t(95155),r=t(12115),i=t(40968),n=t(74466),d=t(59434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.b,{ref:s,className:(0,d.cn)(o(),t),...r})});l.displayName=i.b.displayName},87481:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m,oR:()=>u});var a=t(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},d=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],l={toasts:[]};function c(e){l=d(l,e),o.forEach(e=>{e(l)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(l);return a.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,4277,3909,5863,8441,1684,7358],()=>s(84536)),_N_E=e.O()}]);