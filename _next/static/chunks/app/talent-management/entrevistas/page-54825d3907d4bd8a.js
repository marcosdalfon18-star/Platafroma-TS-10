(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2706],{17167:(e,a,s)=>{Promise.resolve().then(s.bind(s,56476))},56476:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>B});var t=s(95155),n=s(12115),i=s(66695),r=s(30285),l=s(26126),o=s(85127),d=s(17313),c=s(62523),u=s(94063),m=s(18046),x=s(11133),v=s(51920),p=s(8376),h=s(24371),j=s(30462),g=s(75074),f=s(3561),N=s(13300),w=s(18763),y=s(77223),C=s(44838),b=s(83013),A=s(61055),E=s(22497),P=s(10077),S=s(10664),_=s(19053),k=s(40283),R=s(87481),L=s(95196),F=s(70412);let I=()=>{let[e,a]=(0,n.useState)("default"),[t,i]=(0,n.useState)(null),r=(0,n.useCallback)(async()=>{if("serviceWorker"in navigator)try{let{getMessaging:e,getToken:a,onMessage:t}=await s.e(996).then(s.bind(s,20996)),n=e(F.y);if(t(n,e=>{var a,s,t;console.log("Foreground message received: ",e);let n=(null==(a=e.notification)?void 0:a.title)||"New Notification",i={body:(null==(s=e.notification)?void 0:s.body)||"",icon:(null==(t=e.notification)?void 0:t.icon)||"/firebase-logo.png"};new Notification(n,i)}),"granted"===Notification.permission){let e=await a(n,{vapidKey:"BHr_aTAVZApr4QIFN9ZXvlGAR79o8vA9n-b0xXFm_kPpt2xPzPjdn-UvBv16aAYQc52Y95amSMeL8lc-GkYJ8oI"});e?(i(e),console.log("FCM Token:",e)):console.log("Could not get registration token.")}}catch(e){console.error("Error initializing Firebase Messaging:",e)}},[]);return(0,n.useEffect)(()=>{"Notification"in window&&a(Notification.permission),r()},[r]),{permissionStatus:e,fcmToken:t,requestPermission:async()=>{if(!("Notification"in window))return void alert("This browser does not support desktop notifications.");let e=await Notification.requestPermission();a(e),"granted"===e&&await r()},sendTestNotification:(a,s)=>{"granted"===e?new Notification(a,{body:s}):console.warn("Cannot send test notification, permission not granted.")}}},D=()=>{let e=I(),a=async a=>{let{permissionStatus:s,sendTestNotification:t}=e;"granted"===s?(t(a.title,a.body),console.log("Notification sent: ".concat(a.title))):console.warn("Push notifications not permitted")};return{notifyInterviewScheduled:async(e,s,t)=>{await a({type:"interview_scheduled",title:"Nueva Entrevista Programada",body:"Entrevista con ".concat(e," el ").concat(s," por ").concat(t),data:{candidateName:e,date:s,interviewerName:t}})},notifyInterviewCompleted:async(e,s)=>{await a({type:"interview_completed",title:"Entrevista Completada",body:"La entrevista de ".concat(e," ha sido completada. Decisi\xf3n: ").concat(s),data:{candidateName:e,decision:s}})},notifyPayrollApproved:async(e,s)=>{await a({type:"payroll_approved",title:"N\xf3mina Aprobada",body:"Se ha aprobado la n\xf3mina para ".concat(e," empleados por un total de ").concat(s),data:{employeeCount:e,totalAmount:s}})},notifyVacancyCreated:async(e,s)=>{await a({type:"vacancy_created",title:"Nueva Vacante Creada",body:"Se ha creado una vacante para ".concat(e," en ").concat(s),data:{position:e,department:s}})},notifyDeadlineApproaching:async(e,s)=>{await a({type:"deadline_approaching",title:"Fecha L\xedmite Pr\xf3xima",body:"".concat(e," vence en ").concat(s," d\xedas"),data:{event:e,daysLeft:s}})},permissionStatus:e.permissionStatus,requestPermission:e.requestPermission}},X=()=>{let{user:e}=(0,k.A)(),{toast:a}=(0,R.dj)(),s=D(),{interviews:_,candidates:F,stats:I,loading:X,createInterview:B,updateInterviewStatus:O,addEvaluation:T,deleteInterview:q,getTodaysInterviews:H,getUpcomingInterviews:V}=(0,E.y)(),[Z,z]=(0,n.useState)(!1),[G,M]=(0,n.useState)(!1),[Q,U]=(0,n.useState)(null),[W,Y]=(0,n.useState)(""),[$,J]=(0,n.useState)("all"),K={canCreate:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canEdit:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canDelete:(null==e?void 0:e.role)==="consultor",canEvaluate:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canViewAll:(null==e?void 0:e.role)==="consultor"||(null==e?void 0:e.role)==="empresario",canManageProcess:(null==e?void 0:e.role)==="consultor",isReadOnly:(null==e?void 0:e.role)==="empleado"||(null==e?void 0:e.role)==="gestor"},ee=async e=>{if(!K.canCreate)return void a({title:"Permisos insuficientes",description:"Solo Consultoras y Empresarios pueden crear entrevistas",variant:"destructive"});await B(e);let t=F.find(a=>a.id===e.candidateId);t&&await s.notifyInterviewScheduled(t.name,e.date.toLocaleDateString("es-ES"),e.interviewerName)},ea=async(e,t,n,i)=>{if(!K.canEvaluate)return void a({title:"Permisos insuficientes",description:"Solo Consultoras y Empresarios pueden evaluar entrevistas",variant:"destructive"});(null==Q?void 0:Q.id)&&(await T(Q.id,e,t,n,i),await s.notifyInterviewCompleted(Q.candidateName,"approved"===n?"Aprobado":"rejected"===n?"Rechazado":"Pendiente"))},es=async(e,s)=>{if(!K.canEdit)return void a({title:"Permisos insuficientes",description:"No tienes permisos para modificar el estado de las entrevistas",variant:"destructive"});await O(e,s)},et=async e=>{if(!K.canDelete)return void a({title:"Permisos insuficientes",description:"Solo las Consultoras pueden eliminar entrevistas",variant:"destructive"});confirm("\xbfEst\xe1s seguro de que quieres eliminar esta entrevista?")&&await q(e)},en=_.filter(e=>e.candidateName.toLowerCase().includes(W.toLowerCase())||e.position.toLowerCase().includes(W.toLowerCase())||e.interviewerName.toLowerCase().includes(W.toLowerCase())),ei=()=>{switch($){case"today":return H();case"upcoming":return V();case"scheduled":return en.filter(e=>"scheduled"===e.status);case"completed":return en.filter(e=>"completed"===e.status);case"pending-evaluation":return en.filter(e=>{var a;return"completed"===e.status&&!(null==(a=e.evaluations)?void 0:a.length)});default:return en}},er=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"rescheduled":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},el=e=>{switch(e){case"scheduled":return"Programada";case"in-progress":return"En Progreso";case"completed":return"Completada";case"cancelled":return"Cancelada";case"rescheduled":return"Reprogramada";default:return e}},eo=e=>{switch(e){case"approved":return(0,t.jsx)(l.E,{className:"bg-green-100 text-green-800",children:"Aprobado"});case"rejected":return(0,t.jsx)(l.E,{className:"bg-red-100 text-red-800",children:"Rechazado"});case"pending":return(0,t.jsx)(l.E,{className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});default:return(0,t.jsx)(l.E,{variant:"outline",children:"Sin evaluar"})}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 text-primary"}),(null==e?void 0:e.role)==="consultor"?"Gesti\xf3n de Entrevistas":(null==e?void 0:e.role)==="empresario"?"Entrevistas de la Empresa":"Consulta de Entrevistas"]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:(null==e?void 0:e.role)==="consultor"?"Programa, gestiona y eval\xfaa entrevistas de candidatos":(null==e?void 0:e.role)==="empresario"?"Revisa y participa en el proceso de entrevistas":"Consulta informaci\xf3n sobre entrevistas programadas"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(l.E,{variant:(null==e?void 0:e.role)==="consultor"?"default":"secondary",children:(null==e?void 0:e.role)==="consultor"?"\uD83D\uDC69‍\uD83D\uDCBC Consultora":(null==e?void 0:e.role)==="empresario"?"\uD83C\uDFE2 Empresario":(null==e?void 0:e.role)==="empleado"?"\uD83D\uDC68‍\uD83D\uDCBB Empleado":(null==e?void 0:e.role)==="gestor"?"\uD83D\uDC54 Gestor":"Usuario"}),K.isReadOnly&&(0,t.jsx)(l.E,{variant:"outline",className:"text-orange-600 border-orange-200",children:"\uD83D\uDC41️ Solo Lectura"})]})]}),K.canCreate&&(0,t.jsxs)(r.$,{onClick:()=>z(!0),children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Nueva Entrevista"]}),K.isReadOnly&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground bg-orange-50 p-3 rounded-lg border border-orange-200",children:[(0,t.jsx)(x.A,{className:"inline h-4 w-4 mr-2 text-orange-600"}),"Contacta a la Consultora para gestionar entrevistas"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,t.jsx)(L.f,{title:"Total",value:I.total,icon:u.A,description:"entrevistas"}),(0,t.jsx)(L.f,{title:"Programadas",value:I.scheduled,icon:v.A,iconClassName:"text-blue-600",description:"pendientes"}),(0,t.jsx)(L.f,{title:"Completadas",value:I.completed,icon:p.A,iconClassName:"text-green-600",description:"evaluadas"}),(0,t.jsx)(L.f,{title:"Aprobados",value:I.approved,icon:p.A,iconClassName:"text-green-600",description:"candidatos"}),(0,t.jsx)(L.f,{title:"Rechazados",value:I.rejected,icon:h.A,iconClassName:"text-red-600",description:"candidatos"}),(0,t.jsx)(L.f,{title:"Promedio",value:I.averageScore.toFixed(1),icon:j.A,iconClassName:"text-yellow-600",description:"puntuaci\xf3n"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(c.p,{placeholder:"Buscar por candidato, posici\xf3n o entrevistador...",value:W,onChange:e=>Y(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(d.tU,{value:$,onValueChange:J,children:[(0,t.jsxs)(d.j7,{children:[(0,t.jsx)(d.Xi,{value:"all",children:"Todas"}),(0,t.jsx)(d.Xi,{value:"today",children:"Hoy"}),(0,t.jsx)(d.Xi,{value:"upcoming",children:"Pr\xf3ximas"}),(0,t.jsx)(d.Xi,{value:"scheduled",children:"Programadas"}),(0,t.jsx)(d.Xi,{value:"completed",children:"Completadas"}),(0,t.jsx)(d.Xi,{value:"pending-evaluation",children:"Pendientes Evaluaci\xf3n"})]}),(0,t.jsx)(d.av,{value:$,className:"space-y-4",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Entrevistas"}),(0,t.jsxs)(i.BT,{children:[ei().length," entrevista(s) encontrada(s)"]})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Candidato"}),(0,t.jsx)(o.nd,{children:"Posici\xf3n"}),(0,t.jsx)(o.nd,{children:"Fecha y Hora"}),(0,t.jsx)(o.nd,{children:"Entrevistador"}),(0,t.jsx)(o.nd,{children:"Estado"}),(0,t.jsx)(o.nd,{children:"Decisi\xf3n"}),(0,t.jsx)(o.nd,{children:"Puntuaci\xf3n"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Acciones"})]})}),(0,t.jsxs)(o.BF,{children:[ei().map(e=>{var a;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{className:"font-medium",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.candidateName}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.candidateEmail})]})}),(0,t.jsx)(o.nA,{children:e.position}),(0,t.jsx)(o.nA,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,b.GP)(e.date,"PPP",{locale:A.es})}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.time," • ",e.duration,"min"]})]})}),(0,t.jsx)(o.nA,{children:e.interviewerName}),(0,t.jsx)(o.nA,{children:(0,t.jsx)(l.E,{className:er(e.status),children:el(e.status)})}),(0,t.jsx)(o.nA,{children:eo(e.decision)}),(0,t.jsx)(o.nA,{children:e.finalScore?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"}),(0,t.jsx)("span",{children:e.finalScore.toFixed(1)})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,t.jsx)(o.nA,{className:"text-right",children:(0,t.jsxs)(C.rI,{children:[(0,t.jsx)(C.ty,{asChild:!0,children:(0,t.jsx)(r.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,t.jsx)(f.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(C.SQ,{align:"end",children:["scheduled"===e.status&&(0,t.jsxs)(C._2,{onClick:()=>es(e.id,"in-progress"),children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Iniciar Entrevista"]}),("in-progress"===e.status||"completed"===e.status)&&(0,t.jsxs)(C._2,{onClick:()=>{U(e),M(!0)},children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(null==(a=e.evaluations)?void 0:a.length)?"Ver/Editar Evaluaci\xf3n":"Evaluar"]}),(0,t.jsxs)(C._2,{onClick:()=>{U(e),z(!0)},children:[(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,t.jsx)(C.mB,{}),(0,t.jsxs)(C._2,{onClick:()=>et(e.id),className:"text-red-600",children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})})]},e.id)}),0===ei().length&&(0,t.jsx)(o.Hj,{children:(0,t.jsx)(o.nA,{colSpan:8,className:"h-24 text-center text-muted-foreground",children:"No se encontraron entrevistas"})})]})]})})]})})]}),(0,t.jsx)(P.A,{isOpen:Z,onClose:()=>{z(!1),U(null)},onSubmit:ee,candidates:F,interview:Q||void 0,loading:X}),Q&&(0,t.jsx)(S.A,{isOpen:G,onClose:()=>{M(!1),U(null)},onSubmit:ea,interview:Q,loading:X})]})};function B(){return(0,t.jsx)(_.O,{allowedRoles:["consultor","empresario"],children:(0,t.jsx)(X,{})})}},95196:(e,a,s)=>{"use strict";s.d(a,{f:()=>r});var t=s(95155);s(12115);var n=s(66695),i=s(59434);let r=e=>{let{title:a,value:s,description:r,icon:l,iconClassName:o="text-muted-foreground",trend:d,className:c}=e;return(0,t.jsxs)(n.Zp,{className:(0,i.cn)("",c),children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:a}),(0,t.jsx)(l,{className:(0,i.cn)("h-4 w-4",o)})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s}),r&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r}),d&&(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center text-xs mt-1",d.isPositive?"text-green-600":"text-red-600"),children:[(0,t.jsxs)("span",{children:[d.isPositive?"+":"",d.value,"%"]}),(0,t.jsx)("span",{className:"ml-1",children:"vs mes anterior"})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,3644,4277,3909,4052,9233,2001,7788,2891,4800,9714,7269,8615,6755,8441,1684,7358],()=>a(17167)),_N_E=e.O()}]);