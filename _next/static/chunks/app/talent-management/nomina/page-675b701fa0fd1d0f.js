(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1612],{28843:(e,s,a)=>{Promise.resolve().then(a.bind(a,52910))},52910:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var l=a(95155),t=a(12115),n=a(66695),i=a(30285),r=a(85127),c=a(26126),d=a(88390),o=a(34301),x=a(50286),m=a(80659),u=a(6160),h=a(51920),j=a(50172),p=a(17607),v=a(10518),N=a(68718),f=a(14089),b=a(59409),g=a(57873),A=a(95196);let w=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],y=Array.from({length:5},(e,s)=>new Date().getFullYear()-2+s),C=[{id:"emp1",name:"Ana Garc\xeda",position:"Desarrolladora Senior"},{id:"emp2",name:"Carlos Mendoza",position:"Gerente de Operaciones"},{id:"emp3",name:"Sof\xeda L\xf3pez",position:"Dise\xf1adora UX"}];function S(){var e;let{payrolls:s,loading:a,summary:S,loadPayrollsByPeriod:E,approvePayroll:k,markAsPaid:z,createPayroll:B}=(0,f.E)(),[D,P]=(0,t.useState)(new Date().getMonth()+1),[$,_]=(0,t.useState)(new Date().getFullYear()),[F,G]=(0,t.useState)(!1),I=(0,t.useCallback)(()=>{E(D,$)},[D,$,E]);t.useEffect(()=>{I()},[I]);let O=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e),T=e=>{switch(e){case"paid":return"default";case"approved":return"secondary";case"draft":return"outline";default:return"destructive"}},M=e=>{switch(e){case"paid":return"Pagado";case"approved":return"Aprobado";case"draft":return"Borrador";default:return"Cancelado"}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,l.jsx)(d.A,{className:"h-8 w-8 text-primary"}),"Gesti\xf3n de N\xf3minas"]}),(0,l.jsx)("p",{className:"text-muted-foreground mt-2",children:"Administra los pagos y n\xf3minas de todos los empleados"})]}),(0,l.jsxs)(i.$,{onClick:()=>G(!0),children:[(0,l.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Crear N\xf3mina"]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsx)(A.f,{title:"N\xf3minas Procesadas",value:S.totalEmployees,description:"empleados",icon:x.A}),(0,l.jsx)(A.f,{title:"Total Bruto",value:O(S.totalGross),description:"antes de deducciones",icon:m.A}),(0,l.jsx)(A.f,{title:"Total Neto",value:O(S.totalNet),description:"a pagar",icon:d.A}),(0,l.jsx)(A.f,{title:"Deducciones",value:O(S.totalDeductions),description:"impuestos y contribuciones",icon:u.A})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(h.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Per\xedodo:"})]}),(0,l.jsxs)(b.l6,{value:D.toString(),onValueChange:e=>P(parseInt(e)),children:[(0,l.jsx)(b.bq,{className:"w-[140px]",children:(0,l.jsx)(b.yv,{})}),(0,l.jsx)(b.gC,{children:w.map(e=>(0,l.jsx)(b.eb,{value:e.value.toString(),children:e.label},e.value))})]}),(0,l.jsxs)(b.l6,{value:$.toString(),onValueChange:e=>_(parseInt(e)),children:[(0,l.jsx)(b.bq,{className:"w-[100px]",children:(0,l.jsx)(b.yv,{})}),(0,l.jsx)(b.gC,{children:y.map(e=>(0,l.jsx)(b.eb,{value:e.toString(),children:e},e))})]}),(0,l.jsx)(i.$,{variant:"outline",onClick:I,children:"Actualizar"})]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsxs)(n.aR,{children:[(0,l.jsxs)(n.ZB,{children:["N\xf3minas de ",null==(e=w.find(e=>e.value===D))?void 0:e.label," ",$]}),(0,l.jsx)(n.BT,{children:"Listado detallado de todas las n\xf3minas del per\xedodo seleccionado"})]}),(0,l.jsx)(n.Wu,{children:a?(0,l.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,l.jsx)(j.A,{className:"h-8 w-8 animate-spin"}),(0,l.jsx)("span",{className:"ml-2",children:"Cargando n\xf3minas..."})]}):(0,l.jsxs)(r.XI,{children:[(0,l.jsx)(r.A0,{children:(0,l.jsxs)(r.Hj,{children:[(0,l.jsx)(r.nd,{children:"Empleado"}),(0,l.jsx)(r.nd,{children:"Salario Base"}),(0,l.jsx)(r.nd,{children:"Total Bruto"}),(0,l.jsx)(r.nd,{children:"Total Neto"}),(0,l.jsx)(r.nd,{children:"Estado"}),(0,l.jsx)(r.nd,{className:"text-right",children:"Acciones"})]})}),(0,l.jsx)(r.BF,{children:s.map(e=>(0,l.jsxs)(r.Hj,{children:[(0,l.jsx)(r.nA,{className:"font-medium",children:e.employeeId}),(0,l.jsx)(r.nA,{children:O(e.baseSalary)}),(0,l.jsx)(r.nA,{children:O(e.totalGross)}),(0,l.jsx)(r.nA,{className:"font-medium",children:O(e.totalNet)}),(0,l.jsx)(r.nA,{children:(0,l.jsx)(c.E,{variant:T(e.status),children:M(e.status)})}),(0,l.jsx)(r.nA,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)(i.$,{variant:"outline",size:"sm",children:(0,l.jsx)(p.A,{className:"h-4 w-4"})}),"draft"===e.status&&(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>k(e.id),children:(0,l.jsx)(v.A,{className:"h-4 w-4"})}),"approved"===e.status&&(0,l.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>z(e.id),children:(0,l.jsx)(u.A,{className:"h-4 w-4"})}),(0,l.jsx)(i.$,{variant:"outline",size:"sm",children:(0,l.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,l.jsx)(g.A,{isOpen:F,onClose:()=>G(!1),onSubmit:async e=>{try{await B(e),I()}catch(e){}},employees:C})]})}},95196:(e,s,a)=>{"use strict";a.d(s,{f:()=>i});var l=a(95155);a(12115);var t=a(66695),n=a(59434);let i=e=>{let{title:s,value:a,description:i,icon:r,iconClassName:c="text-muted-foreground",trend:d,className:o}=e;return(0,l.jsxs)(t.Zp,{className:(0,n.cn)("",o),children:[(0,l.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(t.ZB,{className:"text-sm font-medium",children:s}),(0,l.jsx)(r,{className:(0,n.cn)("h-4 w-4",c)})]}),(0,l.jsxs)(t.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:a}),i&&(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:i}),d&&(0,l.jsxs)("div",{className:(0,n.cn)("flex items-center text-xs mt-1",d.isPositive?"text-green-600":"text-red-600"),children:[(0,l.jsxs)("span",{children:[d.isPositive?"+":"",d.value,"%"]}),(0,l.jsx)("span",{className:"ml-1",children:"vs mes anterior"})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,4277,3909,9233,2001,7788,2891,4999,8615,7023,8441,1684,7358],()=>s(28843)),_N_E=e.O()}]);