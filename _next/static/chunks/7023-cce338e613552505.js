"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7023],{6160:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(40157).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9086:(e,a,t)=>{t.d(a,{Dc:()=>r.Dc,Gz:()=>u,Nn:()=>c,_L:()=>m,lU:()=>d,ui:()=>i});var r=t(35317),s=t(70412);let n={USERS:"users",COMPANIES:"companies",EMPLOYEES:"employees",JOB_POSITIONS:"jobPositions",SELECTION_PROCESSES:"selectionProcesses",PAYROLLS:"payrolls",ATTENDANCES:"attendances",DOCUMENTS:"documents"},l=e=>(0,r.rJ)(s.db,n[e]),o=(e,a)=>(0,r.H9)(s.db,n[e],a),i=async(e,a)=>{let t=r.Dc.now();return await (0,r.gS)(l(e),{...a,createdAt:t,updatedAt:t})},d=async(e,a,t)=>await (0,r.mZ)(o(e,a),{...t,updatedAt:r.Dc.now()}),c=async(e,a)=>await (0,r.kd)(o(e,a)),u=async(e,a)=>{let t=(0,r.P)(l(e),...a);return(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},m=async(e,a)=>{let t=await (0,r.x7)(o(e,a));return t.exists()?{id:t.id,...t.data()}:null}},14089:(e,a,t)=>{t.d(a,{E:()=>o});var r=t(12115),s=t(40283),n=t(87481),l=t(85427);let o=()=>{let{user:e}=(0,s.A)(),{toast:a}=(0,n.dj)(),[t,o]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),m=(null==e?void 0:e.companyId)||"default-company",p=async()=>{if(e){d(!0);try{let e=await (0,l.rI)(m);o(e)}catch(e){console.error("Error loading payrolls:",e),a({title:"Error",description:"No se pudieron cargar las n\xf3minas",variant:"destructive"})}finally{d(!1)}}},y=async e=>{d(!0);try{let a=await (0,l.ew)(e);o(a)}catch(e){console.error("Error loading employee payrolls:",e),a({title:"Error",description:"No se pudieron cargar las n\xf3minas del empleado",variant:"destructive"})}finally{d(!1)}},h=async(t,r)=>{if(e){d(!0);try{let e=await (0,l.Tv)(m,t,r);o(e);let a=await (0,l.iW)(m,t,r);u(a)}catch(e){console.error("Error loading payrolls by period:",e),a({title:"Error",description:"No se pudieron cargar las n\xf3minas del per\xedodo",variant:"destructive"})}finally{d(!1)}}},x=async t=>{if(e){d(!0);try{let r=await (0,l.iv)({...t,companyId:m,createdBy:e.uid});return a({title:"\xc9xito",description:"N\xf3mina creada correctamente"}),await p(),r}catch(e){throw console.error("Error creating payroll:",e),a({title:"Error",description:"No se pudo crear la n\xf3mina",variant:"destructive"}),e}finally{d(!1)}}},f=async(e,t)=>{d(!0);try{await (0,l.hm)(e,t),a({title:"\xc9xito",description:"N\xf3mina actualizada correctamente"}),await p()}catch(e){throw console.error("Error updating payroll:",e),a({title:"Error",description:"No se pudo actualizar la n\xf3mina",variant:"destructive"}),e}finally{d(!1)}},v=async e=>{d(!0);try{await (0,l.BB)(e),a({title:"\xc9xito",description:"N\xf3mina eliminada correctamente"}),await p()}catch(e){throw console.error("Error deleting payroll:",e),a({title:"Error",description:"No se pudo eliminar la n\xf3mina",variant:"destructive"}),e}finally{d(!1)}},g=async e=>{try{await (0,l.T4)(e),a({title:"\xc9xito",description:"N\xf3mina aprobada correctamente"}),await p()}catch(e){console.error("Error approving payroll:",e),a({title:"Error",description:"No se pudo aprobar la n\xf3mina",variant:"destructive"})}},N=async e=>{try{await (0,l.Lo)(e),a({title:"\xc9xito",description:"N\xf3mina marcada como pagada"}),await p()}catch(e){console.error("Error marking payroll as paid:",e),a({title:"Error",description:"No se pudo marcar la n\xf3mina como pagada",variant:"destructive"})}};return(0,r.useEffect)(()=>{e&&p()},[e]),{payrolls:t,loading:i,summary:c,loadPayrolls:p,loadEmployeePayrolls:y,loadPayrollsByPeriod:h,createPayroll:x,updatePayroll:f,deletePayroll:v,approvePayroll:g,markAsPaid:N}}},17607:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(40157).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},28905:(e,a,t)=>{t.d(a,{C:()=>l});var r=t(12115),s=t(6101),n=t(52712),l=e=>{let{present:a,children:t}=e,l=function(e){var a,t;let[s,l]=r.useState(),i=r.useRef({}),d=r.useRef(e),c=r.useRef("none"),[u,m]=(a=e?"mounted":"unmounted",t={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((e,a)=>{let r=t[e][a];return null!=r?r:e},a));return r.useEffect(()=>{let e=o(i.current);c.current="mounted"===u?e:"none"},[u]),(0,n.N)(()=>{let a=i.current,t=d.current;if(t!==e){let r=c.current,s=o(a);e?m("MOUNT"):"none"===s||(null==a?void 0:a.display)==="none"?m("UNMOUNT"):t&&r!==s?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,n.N)(()=>{if(s){var e;let a,t=null!=(e=s.ownerDocument.defaultView)?e:window,r=e=>{let r=o(i.current).includes(e.animationName);if(e.target===s&&r&&(m("ANIMATION_END"),!d.current)){let e=s.style.animationFillMode;s.style.animationFillMode="forwards",a=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=e)})}},n=e=>{e.target===s&&(c.current=o(i.current))};return s.addEventListener("animationstart",n),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(a),s.removeEventListener("animationstart",n),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}m("ANIMATION_END")},[s,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback(e=>{e&&(i.current=getComputedStyle(e)),l(e)},[])}}(a),i="function"==typeof t?t({present:l.isPresent}):r.Children.only(t),d=(0,s.s)(l.ref,function(e){var a,t;let r=null==(a=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(s=(r=null==(t=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:t.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(i));return"function"==typeof t||l.isPresent?r.cloneElement(i,{ref:d}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}l.displayName="Presence"},34301:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},51920:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(40157).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},54165:(e,a,t)=>{t.d(a,{Cf:()=>m,Es:()=>y,HM:()=>c,L3:()=>h,c7:()=>p,lG:()=>i,rr:()=>x});var r=t(95155),s=t(12115),n=t(45821),l=t(25318),o=t(59434);let i=n.bL;n.l9;let d=n.ZL,c=n.bm,u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=n.hJ.displayName;let m=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let y=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};y.displayName="DialogFooter";let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});h.displayName=n.hE.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});x.displayName=n.VY.displayName},57873:(e,a,t)=>{t.d(a,{A:()=>g});var r=t(95155),s=t(12115),n=t(54165),l=t(30285),o=t(62523),i=t(85057),d=t(59409),c=t(66695),u=t(26126),m=t(18046),p=t(77223);let y=(0,t(40157).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var h=t(85427);let x=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],f=["Horas Extra","Bonificaci\xf3n por Desempe\xf1o","Comisiones","Subsidio de Transporte","Bonificaci\xf3n Familiar"],v=["Seguridad Social","Impuesto sobre la Renta","Pensi\xf3n","Salud","Pr\xe9stamo Empresa","Fondo de Pensiones"],g=e=>{let{isOpen:a,onClose:t,onSubmit:g,employees:N=[]}=e,[b,j]=(0,s.useState)({employeeId:"",period:{month:new Date().getMonth()+1,year:new Date().getFullYear()},baseSalary:0,bonuses:[],deductions:[]}),[w,S]=(0,s.useState)({concept:"",amount:0}),[E,A]=(0,s.useState)({concept:"",amount:0}),{totalBonuses:M,totalDeductions:C,totalGross:k,totalNet:R}=(0,h.Dc)(b.baseSalary,b.bonuses,b.deductions),T=e=>{j(a=>({...a,bonuses:a.bonuses.filter((a,t)=>t!==e)}))},O=e=>{j(a=>({...a,deductions:a.deductions.filter((a,t)=>t!==e)}))},L=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e);return(0,s.useEffect)(()=>{a||j({employeeId:"",period:{month:new Date().getMonth()+1,year:new Date().getFullYear()},baseSalary:0,bonuses:[],deductions:[]})},[a]),(0,r.jsx)(n.lG,{open:a,onOpenChange:t,children:(0,r.jsxs)(n.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(n.c7,{children:(0,r.jsx)(n.L3,{children:"Crear Nueva N\xf3mina"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(b),t()},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"employee",children:"Empleado"}),(0,r.jsxs)(d.l6,{value:b.employeeId,onValueChange:e=>{let a=N.find(a=>a.id===e);j(t=>({...t,employeeId:e,baseSalary:(null==a?void 0:a.baseSalary)||0}))},children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Seleccionar empleado"})}),(0,r.jsx)(d.gC,{children:N.map(e=>(0,r.jsxs)(d.eb,{value:e.id,children:[e.name," - ",e.position]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"baseSalary",children:"Salario Base"}),(0,r.jsx)(o.p,{id:"baseSalary",type:"number",value:b.baseSalary,onChange:e=>j(a=>({...a,baseSalary:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"month",children:"Mes"}),(0,r.jsxs)(d.l6,{value:b.period.month.toString(),onValueChange:e=>j(a=>({...a,period:{...a.period,month:parseInt(e)}})),children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{})}),(0,r.jsx)(d.gC,{children:x.map(e=>(0,r.jsx)(d.eb,{value:e.value.toString(),children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"year",children:"A\xf1o"}),(0,r.jsx)(o.p,{id:"year",type:"number",value:b.period.year,onChange:e=>j(a=>({...a,period:{...a.period,year:parseInt(e.target.value)||new Date().getFullYear()}}))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"text-lg text-green-600",children:"Bonificaciones"})}),(0,r.jsxs)(c.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.p,{placeholder:"Concepto",value:w.concept,onChange:e=>S(a=>({...a,concept:e.target.value})),list:"bonus-suggestions"}),(0,r.jsx)("datalist",{id:"bonus-suggestions",children:f.map(e=>(0,r.jsx)("option",{value:e},e))}),(0,r.jsx)(o.p,{type:"number",placeholder:"Monto",value:w.amount||"",onChange:e=>S(a=>({...a,amount:parseFloat(e.target.value)||0})),className:"w-32"}),(0,r.jsx)(l.$,{type:"button",onClick:()=>{w.concept&&w.amount>0&&(j(e=>({...e,bonuses:[...e.bonuses,{...w,type:"bonus"}]})),S({concept:"",amount:0}))},size:"sm",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:b.bonuses.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.concept}),(0,r.jsx)(u.E,{variant:"outline",className:"ml-2 text-green-600",children:L(e.amount)})]}),(0,r.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(a),children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})]},a))})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"text-lg text-red-600",children:"Deducciones"})}),(0,r.jsxs)(c.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.p,{placeholder:"Concepto",value:E.concept,onChange:e=>A(a=>({...a,concept:e.target.value})),list:"deduction-suggestions"}),(0,r.jsx)("datalist",{id:"deduction-suggestions",children:v.map(e=>(0,r.jsx)("option",{value:e},e))}),(0,r.jsx)(o.p,{type:"number",placeholder:"Monto",value:E.amount||"",onChange:e=>A(a=>({...a,amount:parseFloat(e.target.value)||0})),className:"w-32"}),(0,r.jsx)(l.$,{type:"button",onClick:()=>{E.concept&&E.amount>0&&(j(e=>({...e,deductions:[...e.deductions,{...E,type:"deduction"}]})),A({concept:"",amount:0}))},size:"sm",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:b.deductions.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.concept}),(0,r.jsx)(u.E,{variant:"outline",className:"ml-2 text-red-600",children:L(e.amount)})]}),(0,r.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(a),children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})]},a))})]})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(y,{className:"h-5 w-5"}),"Resumen de N\xf3mina"]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Salario Base"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:L(b.baseSalary)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-green-600",children:"Total Bonificaciones"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["+",L(M)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-red-600",children:"Total Deducciones"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-red-600",children:["-",L(C)]})]}),(0,r.jsxs)("div",{className:"bg-primary/10 p-2 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Neto a Pagar"}),(0,r.jsx)("p",{className:"text-xl font-bold text-primary",children:L(R)})]})]})})]}),(0,r.jsxs)(n.Es,{children:[(0,r.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),(0,r.jsx)(l.$,{type:"submit",disabled:!b.employeeId||b.baseSalary<=0,children:"Crear N\xf3mina"})]})]})]})})}},80659:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(40157).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},85127:(e,a,t)=>{t.d(a,{A0:()=>o,BF:()=>i,Hj:()=>d,XI:()=>l,nA:()=>u,nd:()=>c});var r=t(95155),s=t(12115),n=t(59434);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,n.cn)("w-full caption-bottom text-sm",t),...s})})});l.displayName="Table";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:a,className:(0,n.cn)("[&_tr]:border-b",t),...s})});o.displayName="TableHeader";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...s})});i.displayName="TableBody",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:a,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});d.displayName="TableRow";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:a,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});c.displayName="TableHead";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:a,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});u.displayName="TableCell",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:a,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption"},85427:(e,a,t)=>{t.d(a,{BB:()=>i,Dc:()=>n,Lo:()=>y,T4:()=>p,Tv:()=>m,ew:()=>c,hm:()=>o,iW:()=>h,iv:()=>l,rI:()=>u});var r=t(35317),s=t(9086);let n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=a.reduce((e,a)=>e+a.amount,0),s=t.reduce((e,a)=>e+a.amount,0),n=e+r;return{totalBonuses:r,totalDeductions:s,totalGross:n,totalNet:n-s}},l=async e=>{let{totalGross:a,totalNet:t}=n(e.baseSalary,e.bonuses,e.deductions),r={...e,bonuses:e.bonuses||[],deductions:e.deductions||[],totalGross:a,totalNet:t,status:"draft"};return(await (0,s.ui)("PAYROLLS",r)).id},o=async(e,a)=>{let t={...a};if(void 0!==a.baseSalary||a.bonuses||a.deductions){let s=await d(e);if(s){var r,l,o;let e=null!=(r=a.baseSalary)?r:s.baseSalary,{totalGross:i,totalNet:d}=n(e,null!=(l=a.bonuses)?l:s.bonuses,null!=(o=a.deductions)?o:s.deductions);t={...t,totalGross:i,totalNet:d}}}await (0,s.lU)("PAYROLLS",e,t)},i=async e=>{await (0,s.Nn)("PAYROLLS",e)},d=async e=>await (0,s._L)("PAYROLLS",e),c=async e=>await (0,s.Gz)("PAYROLLS",[(0,r._M)("employeeId","==",e),(0,r.My)("createdAt","desc")]),u=async e=>await (0,s.Gz)("PAYROLLS",[(0,r._M)("companyId","==",e),(0,r.My)("createdAt","desc")]),m=async(e,a,t)=>await (0,s.Gz)("PAYROLLS",[(0,r._M)("companyId","==",e),(0,r._M)("period.month","==",a),(0,r._M)("period.year","==",t),(0,r.My)("createdAt","desc")]),p=async e=>{await o(e,{status:"approved"})},y=async e=>{await o(e,{status:"paid"})},h=async(e,a,t)=>{let r=await m(e,a,t);return{totalEmployees:r.length,totalGross:r.reduce((e,a)=>e+a.totalGross,0),totalNet:r.reduce((e,a)=>e+a.totalNet,0),totalDeductions:r.reduce((e,a)=>e+a.deductions.reduce((e,a)=>e+a.amount,0),0),totalBonuses:r.reduce((e,a)=>e+a.bonuses.reduce((e,a)=>e+a.amount,0),0),byStatus:{draft:r.filter(e=>"draft"===e.status).length,approved:r.filter(e=>"approved"===e.status).length,paid:r.filter(e=>"paid"===e.status).length}}}}}]);