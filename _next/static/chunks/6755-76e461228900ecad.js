"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6755],{10077:(e,a,t)=>{t.d(a,{A:()=>g});var r=t(95155),s=t(12115),i=t(54165),n=t(30285),d=t(62523),l=t(85057),o=t(88539),c=t(59409),m=t(85511),u=t(14636),p=t(59434),f=t(51920),h=t(50172),x=t(83013),v=t(61055);let g=e=>{let{isOpen:a,onClose:t,onSubmit:g,candidates:y,interview:w,loading:j=!1}=e,[b,N]=(0,s.useState)({candidateId:"",candidateName:"",candidateEmail:"",position:"",date:new Date,time:"",duration:60,location:"",interviewerName:"",interviewerEmail:"",type:"hr",notes:""}),[E,C]=(0,s.useState)(null),[A,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{w&&(N({candidateId:w.candidateId,candidateName:w.candidateName,candidateEmail:w.candidateEmail,position:w.position,date:w.date,time:w.time,duration:w.duration,location:w.location,interviewerName:w.interviewerName,interviewerEmail:w.interviewerEmail,type:w.type,notes:w.notes||""}),C(y.find(e=>e.id===w.candidateId)||null))},[w,y]);let S=async e=>{if(e.preventDefault(),b.candidateId&&b.time&&b.interviewerName){D(!0);try{await g({...b,status:w?w.status:"scheduled"}),t(),N({candidateId:"",candidateName:"",candidateEmail:"",position:"",date:new Date,time:"",duration:60,location:"",interviewerName:"",interviewerEmail:"",type:"hr",notes:""}),C(null)}catch(e){console.error("Error submitting interview:",e)}finally{D(!1)}}};return(0,r.jsx)(i.lG,{open:a,onOpenChange:t,children:(0,r.jsxs)(i.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(i.c7,{children:[(0,r.jsx)(i.L3,{children:w?"Editar Entrevista":"Programar Nueva Entrevista"}),(0,r.jsx)(i.rr,{children:w?"Modifica los detalles de la entrevista":"Completa los datos para programar una nueva entrevista"})]}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"candidate",children:"Candidato *"}),(0,r.jsxs)(c.l6,{value:b.candidateId,onValueChange:e=>{let a=y.find(a=>a.id===e);a&&(C(a),N(e=>({...e,candidateId:a.id||"",candidateName:a.name,candidateEmail:a.email,position:a.position})))},disabled:!!w,children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Selecciona un candidato"})}),(0,r.jsx)(c.gC,{children:y.map(e=>(0,r.jsx)(c.eb,{value:e.id||"",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e.position})]})},e.id))})]})]}),E&&(0,r.jsxs)("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Email:"}),(0,r.jsx)("span",{className:"text-sm",children:E.email})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Tel\xe9fono:"}),(0,r.jsx)("span",{className:"text-sm",children:E.phone})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Posici\xf3n:"}),(0,r.jsx)("span",{className:"text-sm",children:E.position})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{children:"Fecha *"}),(0,r.jsxs)(u.AM,{children:[(0,r.jsx)(u.Wv,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"outline",className:(0,p.cn)("w-full justify-start text-left font-normal",!b.date&&"text-muted-foreground"),children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"}),b.date?(0,x.GP)(b.date,"PPP",{locale:v.es}):"Selecciona una fecha"]})}),(0,r.jsx)(u.hl,{className:"w-auto p-0",children:(0,r.jsx)(m.V,{mode:"single",selected:b.date,onSelect:e=>e&&N(a=>({...a,date:e})),disabled:e=>e<new Date,initialFocus:!0})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"time",children:"Hora *"}),(0,r.jsxs)(c.l6,{value:b.time,onValueChange:e=>N(a=>({...a,time:e})),children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Selecciona hora"})}),(0,r.jsx)(c.gC,{children:["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"].map(e=>(0,r.jsx)(c.eb,{value:e,children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"duration",children:"Duraci\xf3n (minutos)"}),(0,r.jsx)(d.p,{id:"duration",type:"number",value:b.duration,onChange:e=>N(a=>({...a,duration:parseInt(e.target.value)||60})),min:"15",max:"240"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"type",children:"Tipo de Entrevista"}),(0,r.jsxs)(c.l6,{value:b.type,onValueChange:e=>N(a=>({...a,type:e})),children:[(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{})}),(0,r.jsx)(c.gC,{children:[{value:"hr",label:"Recursos Humanos"},{value:"technical",label:"T\xe9cnica"},{value:"cultural",label:"Cultural"},{value:"final",label:"Final"}].map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"location",children:"Ubicaci\xf3n"}),(0,r.jsx)(d.p,{id:"location",placeholder:"Ej: Sala de conferencias A, Videollamada, etc.",value:b.location,onChange:e=>N(a=>({...a,location:e.target.value}))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"interviewerName",children:"Entrevistador *"}),(0,r.jsx)(d.p,{id:"interviewerName",placeholder:"Nombre del entrevistador",value:b.interviewerName,onChange:e=>N(a=>({...a,interviewerName:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"interviewerEmail",children:"Email Entrevistador"}),(0,r.jsx)(d.p,{id:"interviewerEmail",type:"email",placeholder:"email@empresa.com",value:b.interviewerEmail,onChange:e=>N(a=>({...a,interviewerEmail:e.target.value}))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"notes",children:"Notas Adicionales"}),(0,r.jsx)(o.T,{id:"notes",placeholder:"Cualquier informaci\xf3n adicional sobre la entrevista...",value:b.notes,onChange:e=>N(a=>({...a,notes:e.target.value})),rows:3})]}),(0,r.jsxs)(i.Es,{children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),(0,r.jsxs)(n.$,{type:"submit",disabled:A||j||!b.candidateId||!b.time||!b.interviewerName,children:[A&&(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),w?"Actualizar":"Programar"," Entrevista"]})]})]})]})})}},10664:(e,a,t)=>{t.d(a,{A:()=>x});var r=t(95155),s=t(12115),i=t(54165),n=t(30285),d=t(85057),l=t(88539),o=t(22346),c=t(30462),m=t(50172),u=t(59434),p=t(83013),f=t(61055);let h=[{criteria:"Experiencia T\xe9cnica",description:"Conocimientos t\xe9cnicos y experiencia en el puesto"},{criteria:"Habilidades de Comunicaci\xf3n",description:"Capacidad de expresi\xf3n y comunicaci\xf3n efectiva"},{criteria:"Adaptabilidad",description:"Flexibilidad y capacidad de adaptaci\xf3n al cambio"},{criteria:"Trabajo en Equipo",description:"Colaboraci\xf3n y habilidades interpersonales"},{criteria:"Motivaci\xf3n",description:"Entusiasmo y motivaci\xf3n por el puesto y la empresa"},{criteria:"Resoluci\xf3n de Problemas",description:"Capacidad anal\xedtica y de resoluci\xf3n de problemas"}],x=e=>{let{isOpen:a,onClose:t,onSubmit:x,interview:v,loading:g=!1}=e,[y,w]=(0,s.useState)(v.evaluations||h.map(e=>({criteria:e.criteria,score:3,comments:""}))),[j,b]=(0,s.useState)("pending"),[N,E]=(0,s.useState)(v.notes||""),[C,A]=(0,s.useState)(!1),D=y.length>0?y.reduce((e,a)=>e+a.score,0)/y.length:0,S=(e,a,t)=>{w(r=>r.map((r,s)=>s===e?{...r,[a]:t}:r))},_=async e=>{e.preventDefault(),A(!0);try{await x(y,D,j,N),t()}catch(e){console.error("Error submitting evaluation:",e)}finally{A(!1)}},R=e=>e>=4.5?"text-green-600":e>=3.5?"text-yellow-600":"text-red-600",z=e=>{let{score:a,onChange:t}=e;return(0,r.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>t(e),className:(0,u.cn)("p-1 rounded transition-colors",e<=a?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-yellow-400"),children:(0,r.jsx)(c.A,{className:"h-5 w-5 fill-current"})},e))})};return(0,r.jsx)(i.lG,{open:a,onOpenChange:t,children:(0,r.jsxs)(i.Cf,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(i.c7,{children:[(0,r.jsx)(i.L3,{children:"Evaluaci\xf3n de Entrevista"}),(0,r.jsx)(i.rr,{children:"Eval\xfaa el desempe\xf1o del candidato en la entrevista"})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Candidato:"}),(0,r.jsx)("span",{children:v.candidateName})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Posici\xf3n:"}),(0,r.jsx)("span",{children:v.position})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Fecha:"}),(0,r.jsx)("span",{children:(0,p.GP)(v.date,"PPP",{locale:f.es})})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Entrevistador:"}),(0,r.jsx)("span",{children:v.interviewerName})]})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Criterios de Evaluaci\xf3n"}),h.map((e,a)=>{var t,s,i;return(0,r.jsxs)("div",{className:"space-y-3 p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium",children:e.criteria}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(z,{score:(null==(t=y[a])?void 0:t.score)||3,onChange:e=>S(a,"score",e)}),(0,r.jsxs)("span",{className:"text-sm font-medium min-w-[3rem]",children:[(null==(s=y[a])?void 0:s.score)||3,"/5"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"comments-".concat(a),children:"Comentarios"}),(0,r.jsx)(l.T,{id:"comments-".concat(a),placeholder:"Observaciones sobre este criterio...",value:(null==(i=y[a])?void 0:i.comments)||"",onChange:e=>S(a,"comments",e.target.value),rows:2})]})]},e.criteria)})]}),(0,r.jsx)(o.w,{}),(0,r.jsx)("div",{className:"bg-muted p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Puntuaci\xf3n Final:"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:(0,u.cn)("text-2xl font-bold",R(D)),children:[D.toFixed(1),"/5.0"]}),(0,r.jsx)("div",{className:(0,u.cn)("text-sm",R(D)),children:(e=>e>=4.5?"Excelente":e>=3.5?"Bueno":e>=2.5?"Regular":"Necesita Mejora")(D)})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(d.J,{children:"Decisi\xf3n Final"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.$,{type:"button",variant:"approved"===j?"default":"outline",onClick:()=>b("approved"),className:"approved"===j?"bg-green-600 hover:bg-green-700":"",children:"Aprobar"}),(0,r.jsx)(n.$,{type:"button",variant:"rejected"===j?"destructive":"outline",onClick:()=>b("rejected"),children:"Rechazar"}),(0,r.jsx)(n.$,{type:"button",variant:"pending"===j?"secondary":"outline",onClick:()=>b("pending"),children:"Pendiente"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"finalNotes",children:"Notas Finales"}),(0,r.jsx)(l.T,{id:"finalNotes",placeholder:"Observaciones generales, recomendaciones, pr\xf3ximos pasos...",value:N,onChange:e=>E(e.target.value),rows:4})]}),(0,r.jsxs)(i.Es,{children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),(0,r.jsxs)(n.$,{type:"submit",disabled:C||g,children:[C&&(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar Evaluaci\xf3n"]})]})]})]})})}},14636:(e,a,t)=>{t.d(a,{AM:()=>d,Wv:()=>l,hl:()=>o});var r=t(95155),s=t(12115),i=t(98176),n=t(59434);let d=i.bL,l=i.l9,o=s.forwardRef((e,a)=>{let{className:t,align:s="center",sideOffset:d=4,...l}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:a,align:s,sideOffset:d,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});o.displayName=i.UC.displayName},17313:(e,a,t)=>{t.d(a,{Xi:()=>o,av:()=>c,j7:()=>l,tU:()=>d});var r=t(95155),s=t(12115),i=t(60704),n=t(59434);let d=i.bL,l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});l.displayName=i.B8.displayName;let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});o.displayName=i.l9.displayName;let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});c.displayName=i.UC.displayName},19053:(e,a,t)=>{t.d(a,{O:()=>l});var r=t(95155),s=t(12115),i=t(35695),n=t(40283),d=t(50172);let l=e=>{let{children:a,allowedRoles:t}=e,{user:l,loading:o}=(0,n.A)(),c=(0,i.useRouter)();return((0,s.useEffect)(()=>{if(!o){if(!l)return void c.push("/");if(t&&!t.includes(l.role))return void c.push("/dashboard")}},[l,o,c,t]),o)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-8 w-8 animate-spin"})}):l&&(!t||t.includes(l.role))?(0,r.jsx)(r.Fragment,{children:a}):null}},22346:(e,a,t)=>{t.d(a,{w:()=>d});var r=t(95155),s=t(12115),i=t(87489),n=t(59434);let d=s.forwardRef((e,a)=>{let{className:t,orientation:s="horizontal",decorative:d=!0,...l}=e;return(0,r.jsx)(i.b,{ref:a,decorative:d,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...l})});d.displayName=i.b.displayName},22497:(e,a,t)=>{t.d(a,{y:()=>u});var r=t(12115),s=t(40283),i=t(87481),n=t(35317),d=t(70412);let l="interviews",o="candidates",c={async create(e){try{return(await (0,n.gS)((0,n.rJ)(d.db,o),{...e,createdAt:n.Dc.now()})).id}catch(e){throw console.error("Error creating candidate:",e),Error("Error al crear candidato")}},async getAll(e){try{let a=(0,n.P)((0,n.rJ)(d.db,o),(0,n._M)("companyId","==",e),(0,n.My)("createdAt","desc"));return(await (0,n.GG)(a)).docs.map(e=>{var a;return{id:e.id,...e.data(),createdAt:(null==(a=e.data().createdAt)?void 0:a.toDate())||new Date}})}catch(e){return console.error("Error fetching candidates:",e),[]}},async update(e,a){try{await (0,n.mZ)((0,n.H9)(d.db,o,e),a)}catch(e){throw console.error("Error updating candidate:",e),Error("Error al actualizar candidato")}},async delete(e){try{await (0,n.kd)((0,n.H9)(d.db,o,e))}catch(e){throw console.error("Error deleting candidate:",e),Error("Error al eliminar candidato")}}},m={async create(e){try{let a=n.Dc.now();return(await (0,n.gS)((0,n.rJ)(d.db,l),{...e,date:n.Dc.fromDate(e.date),createdAt:a,updatedAt:a})).id}catch(e){throw console.error("Error creating interview:",e),Error("Error al programar entrevista")}},async getAll(e){try{let a=(0,n.P)((0,n.rJ)(d.db,l),(0,n._M)("companyId","==",e),(0,n.My)("date","desc"));return(await (0,n.GG)(a)).docs.map(e=>{var a,t,r;return{id:e.id,...e.data(),date:(null==(a=e.data().date)?void 0:a.toDate())||new Date,createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=e.data().updatedAt)?void 0:r.toDate())||new Date}})}catch(e){return console.error("Error fetching interviews:",e),[]}},async getByStatus(e,a){try{let t=(0,n.P)((0,n.rJ)(d.db,l),(0,n._M)("companyId","==",e),(0,n._M)("status","==",a),(0,n.My)("date","asc"));return(await (0,n.GG)(t)).docs.map(e=>{var a,t,r;return{id:e.id,...e.data(),date:(null==(a=e.data().date)?void 0:a.toDate())||new Date,createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=e.data().updatedAt)?void 0:r.toDate())||new Date}})}catch(e){return console.error("Error fetching interviews by status:",e),[]}},async update(e,a){try{let t={...a,updatedAt:n.Dc.now()};a.date&&(t.date=n.Dc.fromDate(a.date)),await (0,n.mZ)((0,n.H9)(d.db,l,e),t)}catch(e){throw console.error("Error updating interview:",e),Error("Error al actualizar entrevista")}},async updateStatus(e,a){try{await (0,n.mZ)((0,n.H9)(d.db,l,e),{status:a,updatedAt:n.Dc.now()})}catch(e){throw console.error("Error updating interview status:",e),Error("Error al actualizar estado de entrevista")}},async addEvaluation(e,a,t,r){try{await (0,n.mZ)((0,n.H9)(d.db,l,e),{evaluations:a,finalScore:t,decision:r,status:"completed",updatedAt:n.Dc.now()})}catch(e){throw console.error("Error adding evaluation:",e),Error("Error al guardar evaluaci\xf3n")}},async delete(e){try{await (0,n.kd)((0,n.H9)(d.db,l,e))}catch(e){throw console.error("Error deleting interview:",e),Error("Error al eliminar entrevista")}},async getStats(e){try{let a=await this.getAll(e),t={total:a.length,scheduled:a.filter(e=>"scheduled"===e.status).length,completed:a.filter(e=>"completed"===e.status).length,approved:a.filter(e=>"approved"===e.decision).length,rejected:a.filter(e=>"rejected"===e.decision).length,pending:a.filter(e=>"pending"===e.decision).length,averageScore:0},r=a.filter(e=>e.finalScore);return r.length>0&&(t.averageScore=r.reduce((e,a)=>e+(a.finalScore||0),0)/r.length),t}catch(e){return console.error("Error getting interview stats:",e),{total:0,scheduled:0,completed:0,approved:0,rejected:0,pending:0,averageScore:0}}}},u=()=>{let{user:e}=(0,s.A)(),{toast:a}=(0,i.dj)(),[t,n]=(0,r.useState)([]),[d,l]=(0,r.useState)([]),[o,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)({total:0,scheduled:0,completed:0,approved:0,rejected:0,pending:0,averageScore:0}),h=(null==e?void 0:e.companyId)||"default-company",x=(0,r.useCallback)(async()=>{if(e){u(!0);try{let[e,a,t]=await Promise.all([m.getAll(h),c.getAll(h),m.getStats(h)]);n(e),l(a),f(t)}catch(e){console.error("Error fetching interviews data:",e),a({title:"Error",description:"No se pudieron cargar las entrevistas",variant:"destructive"})}finally{u(!1)}}},[e,h,a]);return(0,r.useEffect)(()=>{x()},[x]),{interviews:t,candidates:d,stats:p,loading:o,createCandidate:async e=>{try{u(!0);let t={...e,companyId:h},r=await c.create(t),s={...t,id:r,createdAt:new Date};return l(e=>[s,...e]),a({title:"Candidato creado",description:"El candidato se ha registrado exitosamente"}),r}catch(e){throw a({title:"Error",description:"No se pudo crear el candidato",variant:"destructive"}),e}finally{u(!1)}},updateCandidate:async(e,t)=>{try{await c.update(e,t),l(a=>a.map(a=>a.id===e?{...a,...t}:a)),a({title:"Candidato actualizado",description:"Los datos se han guardado correctamente"})}catch(e){throw a({title:"Error",description:"No se pudo actualizar el candidato",variant:"destructive"}),e}},deleteCandidate:async e=>{try{await c.delete(e),l(a=>a.filter(a=>a.id!==e)),a({title:"Candidato eliminado",description:"El candidato ha sido eliminado del sistema"})}catch(e){throw a({title:"Error",description:"No se pudo eliminar el candidato",variant:"destructive"}),e}},createInterview:async e=>{try{u(!0);let t={...e,companyId:h},r=await m.create(t),s={...t,id:r,createdAt:new Date,updatedAt:new Date};n(e=>[s,...e]);let i=await m.getStats(h);return f(i),a({title:"Entrevista programada",description:"La entrevista se ha programado exitosamente"}),r}catch(e){throw a({title:"Error",description:"No se pudo programar la entrevista",variant:"destructive"}),e}finally{u(!1)}},updateInterview:async(e,t)=>{try{if(await m.update(e,t),n(a=>a.map(a=>a.id===e?{...a,...t,updatedAt:new Date}:a)),t.status||t.decision){let e=await m.getStats(h);f(e)}a({title:"Entrevista actualizada",description:"Los datos se han guardado correctamente"})}catch(e){throw a({title:"Error",description:"No se pudo actualizar la entrevista",variant:"destructive"}),e}},updateInterviewStatus:async(e,t)=>{try{await m.updateStatus(e,t),n(a=>a.map(a=>a.id===e?{...a,status:t,updatedAt:new Date}:a));let r=await m.getStats(h);f(r),a({title:"Estado actualizado",description:{scheduled:"Entrevista programada","in-progress":"Entrevista en progreso",completed:"Entrevista completada",cancelled:"Entrevista cancelada",rescheduled:"Entrevista reprogramada"}[t]})}catch(e){throw a({title:"Error",description:"No se pudo actualizar el estado",variant:"destructive"}),e}},addEvaluation:async(e,t,r,s,i)=>{try{await m.addEvaluation(e,t,r,s),n(a=>a.map(a=>a.id===e?{...a,evaluations:t,finalScore:r,decision:s,notes:i,status:"completed",updatedAt:new Date}:a));let d=await m.getStats(h);f(d),a({title:"Evaluaci\xf3n guardada",description:"La evaluaci\xf3n de la entrevista se ha guardado exitosamente"})}catch(e){throw a({title:"Error",description:"No se pudo guardar la evaluaci\xf3n",variant:"destructive"}),e}},deleteInterview:async e=>{try{await m.delete(e),n(a=>a.filter(a=>a.id!==e));let t=await m.getStats(h);f(t),a({title:"Entrevista eliminada",description:"La entrevista ha sido eliminada del sistema"})}catch(e){throw a({title:"Error",description:"No se pudo eliminar la entrevista",variant:"destructive"}),e}},getInterviewsByStatus:e=>t.filter(a=>a.status===e),getUpcomingInterviews:()=>{let e=new Date;return t.filter(a=>"scheduled"===a.status&&a.date>=e).sort((e,a)=>e.date.getTime()-a.date.getTime())},getTodaysInterviews:()=>{let e=new Date;e.setHours(0,0,0,0);let a=new Date(e);return a.setDate(a.getDate()+1),t.filter(t=>t.date>=e&&t.date<a).sort((e,a)=>e.time.localeCompare(a.time))},fetchData:x}}},44838:(e,a,t)=>{t.d(a,{SQ:()=>u,_2:()=>p,mB:()=>f,rI:()=>c,ty:()=>m});var r=t(95155),s=t(12115),i=t(76215),n=t(73158),d=t(10518),l=t(70154),o=t(59434);let c=i.bL,m=i.l9;i.YJ,i.ZL,i.Pb,i.z6,s.forwardRef((e,a)=>{let{className:t,inset:s,children:d,...l}=e;return(0,r.jsxs)(i.ZP,{ref:a,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...l,children:[d,(0,r.jsx)(n.A,{className:"ml-auto"})]})}).displayName=i.ZP.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.G5,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}).displayName=i.G5.displayName;let u=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...n}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:a,sideOffset:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});u.displayName=i.UC.displayName;let p=s.forwardRef((e,a)=>{let{className:t,inset:s,...n}=e;return(0,r.jsx)(i.q7,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n})});p.displayName=i.q7.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,checked:n,...l}=e;return(0,r.jsxs)(i.H_,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),s]})}).displayName=i.H_.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,r.jsxs)(i.hN,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(l.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=i.hN.displayName,s.forwardRef((e,a)=>{let{className:t,inset:s,...n}=e;return(0,r.jsx)(i.JU,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n})}).displayName=i.JU.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...s})});f.displayName=i.wv.displayName},54165:(e,a,t)=>{t.d(a,{Cf:()=>u,Es:()=>f,HM:()=>c,L3:()=>h,c7:()=>p,lG:()=>l,rr:()=>x});var r=t(95155),s=t(12115),i=t(45821),n=t(25318),d=t(59434);let l=i.bL;i.l9;let o=i.ZL,c=i.bm,m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});m.displayName=i.hJ.displayName;let u=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(o,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(i.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,r.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};f.displayName="DialogFooter";let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});h.displayName=i.hE.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...s})});x.displayName=i.VY.displayName},85127:(e,a,t)=>{t.d(a,{A0:()=>d,BF:()=>l,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>c});var r=t(95155),s=t(12115),i=t(59434);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,i.cn)("w-full caption-bottom text-sm",t),...s})})});n.displayName="Table";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:a,className:(0,i.cn)("[&_tr]:border-b",t),...s})});d.displayName="TableHeader";let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,i.cn)("[&_tr:last-child]:border-0",t),...s})});l.displayName="TableBody",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:a,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});o.displayName="TableRow";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:a,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});c.displayName="TableHead";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:a,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});m.displayName="TableCell",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:a,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption"},85511:(e,a,t)=>{t.d(a,{V:()=>o});var r=t(95155);t(12115);var s=t(965),i=t(73158),n=t(43900),d=t(59434),l=t(30285);function o(e){let{className:a,classNames:t,showOutsideDays:o=!0,...c}=e;return(0,r.jsx)(n.hv,{showOutsideDays:o,className:(0,d.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:a,...t}=e;return(0,r.jsx)(s.A,{className:(0,d.cn)("h-4 w-4",a),...t})},IconRight:e=>{let{className:a,...t}=e;return(0,r.jsx)(i.A,{className:(0,d.cn)("h-4 w-4",a),...t})}},...c})}o.displayName="Calendar"},88539:(e,a,t)=>{t.d(a,{T:()=>n});var r=t(95155),s=t(12115),i=t(59434);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});n.displayName="Textarea"}}]);